<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>BOT VIP bc3.2</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { background: #000; color: #0f0; font-family: sans-serif; text-align: center; padding: 20px; }
        .container { border: 2px solid #0f0; padding: 20px; max-width: 400px; margin: auto; background: #0a0a0a; box-shadow: 0 0 20px #0f0; }
        input { width: 90%; padding: 10px; margin: 10px 0; background: #111; color: #0f0; border: 1px solid #0f0; text-align: center; }
        button { width: 95%; padding: 15px; background: #0f0; color: #000; font-weight: bold; border: none; cursor: pointer; }
        #result { margin-top: 20px; padding: 15px; border: 1px dashed #0f0; min-height: 50px; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"></script>
</head>
<body>
    <div class="container">
        <h2>BOT VIP bc3.2</h2>
        <p style="font-size: 0.8em;">ID MÁY: <span id="did" style="color: #ff0;">...</span></p>
        <input type="text" id="key" placeholder="NHẬP KEY VIP">
        <input type="text" id="history" placeholder="Ví dụ: bau,cua,tom|ca,ga,ga">
        <button onclick="soiCau()">SOI CẦU NGAY</button>
        <div id="result">KẾT QUẢ SẼ HIỆN Ở ĐÂY</div>
    </div>

    <script>
        let dId = "";
        // THAY LINK DƯỚI ĐÂY THÀNH LINK CỦA ÔNG (KHÔNG CÓ / Ở CUỐI)
        const API = "https://trustmebro.pythonanywhere.com/";

        async function init() {
            const fp = await FingerprintJS.load();
            const res = await fp.get();
            dId = res.visitorId;
            document.getElementById('did').innerText = dId;
        }

        async function soiCau() {
            const resDiv = document.getElementById('result');
            resDiv.innerText = "ĐANG PHÂN TÍCH CẦU...";
            try {
                const response = await fetch(`${API}/predict`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        id: dId,
                        key: document.getElementById('key').value,
                        history: document.getElementById('history').value
                    })
                });
                const data = await response.json();
                if (data.status === "ok") {
                    resDiv.innerHTML = data.data;
                } else {
                    resDiv.innerText = data.msg;
                }
            } catch (e) {
                resDiv.innerText = "Lỗi kết nối Server! Kiểm tra lại link API hoặc Reload PythonAnywhere.";
            }
        }
        init();
    </script>
</body>
</html>
